{% extends "base.html.twig" %}

{% block body %} 
<div class="container col-md-10 text-center mt-3">
<tr>
        <th colspan="3" ><li><a class="text text-primary"><h2>List of Students<h2></a></li></th>
         {% if is_granted ('ROLE_ADMIN') %}
        <th> <a class="btn btn-info text-center" href="{{ path('student_add')}}">Add Student</a>
        </th>

        {% endif %}
        <form action="{{ path('student_search') }}" method="post">
			<input type="search" name="name" id="">
			<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
		</form>
	
		<table class="table table-info table-hover mt-5">
			<tr>
				
					<select onchange="window.location.href=this.value">
						<option>Sort</option>
						<option value="{{ path('student_asc')}}">Ascending</option>
						<option value="{{ path('student_desc')}}">Descending</option>
					</select>
 </tr>

<table class="table table-info">

    <thead>
        <tr>
            <th>No</th>
            <th>Image</th>
            <th>Student ID</th>
            <th> Student Name</th>
            <th>Major</th>
             {% if is_granted ('ROLE_ADMIN') %}
            <th>Actions</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
 
    {% set i = 1 %}
    {% for student in student %}
        <tr>
            <td>{{ i }}</td>
            <td>
						<a href="{{ path('student_detail', {'id' : student.id })}} ">
							<img src="{{ student.image }}" width="150" height="150">
					</a>

					</td>
            <td>{{ student.studentid }}</td>
            <td>{{ student.name }}</td>
            <td> 
                     {% if student.major != null %}
                           {{ student.major.name }} 
                        </a>
                     {% else %}
                        N/A
                     {% endif %}
            </td>
            {% if is_granted ('ROLE_ADMIN') %}
            <td>
          
                 
                <a href="{{path('student_edit',{'id': student.id})}}">
                    <img src="{{ asset('images/edit.png')}}" width="30" height="30">
                </a>
                <a  href="{{path('student_delete',{'id': student.id})}}"
                onclick="return confirm('Are you sure to delete this Todo ?')";
                >
                    <img src="{{ asset('images/delete.png')}}" width="30" height="30">
                </a>
            </td>
            {% endif %}

             
           
        </tr>
        {% set i = i + 1 %}
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}